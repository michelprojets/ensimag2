#include "debug.h"
#include "string.h"
#include "inttypes.h"

uint16_t *ptr_mem(uint32_t lig, uint32_t col){
    return (uint16_t *)(0xD8000 + (2 * (lig * 80 + col)));
}

void ecrit_car(uint32_t lig, uint32_t col, char c, uint8_t col_txt,
                uint8_t col_fond){
    /* attention : little endian donc 0xABCD on a CD puis AB en memoire */
    void * addr = (void *)ptr_mem(lig, col); // addresse a ecrire
    uint16_t ascii_c = (uint16_t)c; // recuperation code ascii
    uint16_t format_c = ((uint16_t)col_txt << 4)
                          | (uint16_t)col_fond; // bit 7 a 0 par defaut
    uint16_t case_c = (ascii_c << 8) | format_c;
    memmove(addr, &case_c, sizeof(uint16_t)); // ecriture en memoire
}

/* pour effacer l'ecran, mettre blanc sur fond noir et pas noir sur noir */

void console_putbytes(char *chaine, int32_t taille){
    ecrit_car(2, 3, 'a', 0x1, 0xE); // caractre 'a' bleu sur fond jaune
}
